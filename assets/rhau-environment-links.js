(()=>{"use strict";class n extends HTMLDialogElement{constructor(){super()}connectedCallback(){document.addEventListener("keydown",this.onKeyDown,{capture:!0}),document.addEventListener("click",this.onClick,{capture:!0})}disconnectedCallback(){document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("click",this.onClick)}onKeyDown=e=>{switch(e.code){case"Space":this.handleSpaceDown(e);break;case"Escape":this.handleEscapeDown(e);break}};onClick=e=>{const t=e.target;if(t.matches("rhau-environment-link"))return this.openEnvironmentLink(t);t.closest("rhau-environment-links")||this.open&&(e.stopPropagation(),this.close())};isInputElement(e){if(e?.closest("rhau-environment-link"))return!1;const t=e?.getAttribute("tabindex");return t!==null?!isNaN(parseInt(t))&&parseInt(t)>=0:e?.matches('button, input, textarea, select, a, [contenteditable="true"]')}isSpecialKeyDown(e){return e.metaKey||e.ctrlKey||e.shiftKey||e.altKey}handleSpaceDown=e=>{const t=e.target;if(!(this.isInputElement(t)||this.isSpecialKeyDown(e))){if(e.preventDefault(),e.stopPropagation(),t.matches("rhau-environment-link")){this.openEnvironmentLink(e.target);return}this.showModal(),this.focusFirstLink()}};focusFirstLink(){this.querySelector("rhau-environment-link:first-of-type")?.focus()}focusLastLink(){this.querySelector("rhau-environment-link:last-of-type")?.focus()}handleEscapeDown(e){this.open&&(e.preventDefault(),e.stopPropagation(),this.close())}openEnvironmentLink(e){if(!this.open)return;const t=new URL(window.location.href),i=t.pathname+t.search+t.hash,o=new URL(e.getAttribute("data-remote-origin"));window.open(o.origin+i),this.close()}}customElements.define("rhau-environment-links",n,{extends:"dialog"})})();
