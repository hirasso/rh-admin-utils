(function(){"use strict";var r={};const a=window.jQuery;class e extends HTMLElement{constructor(){super(),this.onKeyDown=t=>{switch(t.code){case"Space":this.handleSpaceDown(t);break;case"Escape":t.preventDefault(),t.stopPropagation(),this.hide();break;case"Tab":this.handleTabDown(t);break}},this.onClick=t=>{if(t.target.matches("rhau-environment-link"))return this.openEnvironmentLink(t.target);t.stopPropagation(),!t.target.closest("rhau-environment-links")&&this.isVisible()&&this.hide()},this.handleSpaceDown=t=>{if(!(this.isInputElement(t.target)||this.isSpecialKeyDown(t))){if(t.preventDefault(),t.stopPropagation(),t.target.matches("rhau-environment-link"))return this.openEnvironmentLink(t.target);this.show()}},this.handleTabDown=t=>{this.isInputElement(t.target)||t.target.matches("rhau-environment-link:last-child")&&(t.preventDefault(),t.stopPropagation(),this.focusFirstLink())},this.attachShadow({mode:"open",delegatesFocus:!0}),this.shadowRoot.innerHTML="<slot>"}connectedCallback(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("click",this.onClick,{capture:!0})}disconnectedCallback(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("click",this.onClick)}isVisible(){return this.classList.contains("is-visible")}isInputElement(t){return t==null?void 0:t.matches('button, input, textarea, [contenteditable="true"]')}isSpecialKeyDown(t){return t.metaKey||t.ctrlKey||t.shiftKey||t.altKey}show(){this.isVisible()||(this.classList.add("is-visible"),this.focusFirstLink())}focusFirstLink(){this.querySelector("rhau-environment-link:first-child").focus()}hide(){this.isVisible()&&this.classList.remove("is-visible")}openEnvironmentLink(t){if(!this.isVisible())return;const i=window.location.href,n=t.getAttribute("data-remote-root"),s=new RegExp(this.getAttribute("data-dev-root"),"gi"),o=i.replace(s,n);window.open(o),this.hide()}trapFocus(t){t.target.matches("rhau-environment-link:last-child")||(t.preventDefault(),t.stopPropagation())}}customElements.define("rhau-environment-links",e)})();
