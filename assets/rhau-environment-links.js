(()=>{"use strict";var r=Object.defineProperty,o=(n,e,t)=>e in n?r(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,i=(n,e,t)=>o(n,typeof e!="symbol"?e+"":e,t);class s extends HTMLDialogElement{constructor(){super(),i(this,"onKeyDown",e=>{switch(e.code){case"Space":this.handleSpaceDown(e);break;case"Escape":this.handleEscapeDown(e);break}}),i(this,"onClick",e=>{const t=e.target;if(t.matches("rhau-environment-link"))return this.openEnvironmentLink(t);t.closest("rhau-environment-links")||this.open&&(e.stopPropagation(),this.close())}),i(this,"handleSpaceDown",e=>{const t=e.target;if(!(this.isInputElement(t)||this.isSpecialKeyDown(e))){if(e.preventDefault(),e.stopPropagation(),t.matches("rhau-environment-link")){this.openEnvironmentLink(e.target);return}this.showModal(),this.focusFirstLink()}})}connectedCallback(){document.addEventListener("keydown",this.onKeyDown,{capture:!0}),document.addEventListener("click",this.onClick,{capture:!0})}disconnectedCallback(){document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("click",this.onClick)}isInputElement(e){if(e!=null&&e.closest("rhau-environment-link"))return!1;const t=e==null?void 0:e.getAttribute("tabindex");return t!==null?!isNaN(parseInt(t))&&parseInt(t)>=0:e==null?void 0:e.matches('button, input, textarea, select, a, [contenteditable="true"]')}isSpecialKeyDown(e){return e.metaKey||e.ctrlKey||e.shiftKey||e.altKey}focusFirstLink(){var e;(e=this.querySelector("rhau-environment-link:first-of-type"))==null||e.focus()}focusLastLink(){var e;(e=this.querySelector("rhau-environment-link:last-of-type"))==null||e.focus()}handleEscapeDown(e){this.open&&(e.preventDefault(),e.stopPropagation(),this.close())}openEnvironmentLink(e){if(!this.open)return;const t=new URL(window.location.href),a=t.pathname+t.search+t.hash,c=new URL(e.getAttribute("data-remote-origin"));window.open(c.origin+a),this.close()}}customElements.define("rhau-environment-links",s,{extends:"dialog"})})();
