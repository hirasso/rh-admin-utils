(()=>{"use strict";var d={};function s(t){const n="Select some plain text to enable",a="Add link to file";t.addButton("rhau_link_to_file",{title:"Add link to file",tooltip:n,icon:"rhau-link-to-file dashicons dashicons-paperclip",disabled:!0,onclick:u,onPostRender:function(){const i=this.getEl().querySelector("button")}});function u(){const i=t.selection.getContent();if(!i){alert("Please select the text you want to link.");return}const e=wp.media({title:"Select File",library:{type:["application/pdf","application/zip"]},multiple:!1,button:{text:"Select"}});function l(){const o=e.state().get("selection").first().toJSON();t.execCommand("mceInsertContent",!1,`<a href="${o.url}" target="_blank" download>${i}</a>`)}e.on("select",l).open()}t.on("NodeChange",function(i){const e=t.controlManager.buttons.rhau_link_to_file;if(!e)return;const l=t.selection.getContent(),o=!!l,r=!/<\/?[a-z][\s\S]*>/i.test(l),c=!o||!r;e.disabled(c),e.settings.tooltip=c?n:a})}(function(){tinymce.create("tinymce.plugins.rhauTinyMcePlugins",{init:function(t,n){s(t)},createControl:function(t,n){return null}}),tinymce.PluginManager.add("rhauTinyMcePlugins",tinymce.plugins.rhauTinyMcePlugins)})()})();
